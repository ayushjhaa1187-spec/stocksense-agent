import pytest
import sys
import os
from unittest.mock import MagicMock

# Mock pandas before importing agent
sys.modules['pandas'] = MagicMock()

# Add src to python path to allow imports
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '../src')))

from agent import StockSenseAgent

def test_path_traversal_scan_inventory():
    agent = StockSenseAgent()
    result = agent.scan_inventory("../etc/passwd")
    assert result is None

def test_path_traversal_save_recommendations():
    agent = StockSenseAgent()
    result = agent.save_recommendations({"dummy": "data"}, "../output_leak.json")
    assert result is None
